name: "mazuri"
test_skus: ["0048601", "3005450", "0048134"]
base_url: "https://mazuri.com"
timeout: 30
retries: 3

selectors:
  - name: "product_json"
    selector: "script[type='application/json'][id*='ProductJson']"

workflows:
  - action: "navigate"
    params:
      url: "https://mazuri.com/pages/search-results-page?q={sku}"
  - action: "wait_for"
    params:
      selector: "a[href*='/products/'], .no-results, .empty-search, .snize-no-results, #search-no-results"
      timeout: 15
  - action: "check_no_results"
  - action: "conditional_skip"
    params:
      if_flag: "no_results_found"
  - action: "click"
    params:
      selector: "a.snize-view-link[href*='/products/']"
  - action: "wait_for"
    params:
      selector: "script[type='application/json'][id*='ProductJson']"
      timeout: 15
  - action: "extract_from_json"
    params:
      selector: "script[type='application/json'][id*='ProductJson']"
      field: "Name"
      json_path: "title"
  - action: "extract_from_json"
    params:
      selector: "script[type='application/json'][id*='ProductJson']"
      field: "Brand"
      json_path: "vendor"
  - action: "extract_from_json"
    params:
      selector: "script[type='application/json'][id*='ProductJson']"
      field: "Weight"
      json_path: "variants.0.option1"
  - action: "extract_from_json"
    params:
      selector: "script[type='application/json'][id*='ProductJson']"
      field: "Image URLs"
      json_path: "images"

anti_detection:
  enable_captcha_detection: false
  enable_rate_limiting: false
  enable_human_simulation: true
  enable_session_rotation: false
  enable_blocking_handling: false
  rate_limit_min_delay: 1.0
  rate_limit_max_delay: 3.0
  session_rotation_interval: 100
  max_retries_on_detection: 3

validation:
  no_results_selectors:
    - ".no-results"
    - ".empty-search"
    - "[data-testid*='no-results']"
    - ".snize-no-results"
    - "#search-no-results"
  no_results_text_patterns:
    - "no results found"
    - "no products found"
    - "your search returned no results"
    - "we couldn't find any results"
    - "no items match your search"
