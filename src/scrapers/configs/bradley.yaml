name: "bradley"
base_url: "https://www.bradleycaldwell.com"
test_skus: ["035585499741"]
timeout: 30
retries: 3

selectors:
  - name: "Name"
    selector: "h1"
    attribute: "text"
  - name: "Brand"
    selector: "p a[href*='kong']"
    attribute: "text"
  - name: "Price"
    selector: ".price, [class*='price']"
    attribute: "text"
  - name: "Weight"
    selector: "//li[contains(text(), 'Weight:')]"
    attribute: "text"
  - name: "Images"
    selector: ".flex.max-w-full.shrink-0.flex-row.gap-2.overflow-x-auto.p-1 img"
    attribute: "src"
    multiple: true

workflows:
  - action: "navigate"
    params:
      url: "https://www.bradleycaldwell.com/search?term={sku}"

  - action: "wait_for"
    params:
      selector:
        [
          "//h1[contains(text(), 'Search results for')]",
          "//h3[contains(text(), 'Sorry, no results for')]",
        ]
      timeout: 20

  - action: "check_no_results"
    params:
      min_confidence: 0.8

  - action: "conditional_skip"
    params:
      if_flag: "no_results_found"

  - action: "click"
    params:
      selector: "article a"
      index: 0
      wait_after: 3

  - action: "wait_for"
    params:
      selector: "h1"
      timeout: 20

  - action: "wait"
    params:
      seconds: 2

  # Extract product details directly from the page
  - action: "extract"
    params:
      fields: ["Name", "Brand", "Weight", "Images"]

validation:
  no_results_selectors:
    - "//*[contains(text(), '0 items')]"
  no_results_text_patterns:
    - "0 items"
